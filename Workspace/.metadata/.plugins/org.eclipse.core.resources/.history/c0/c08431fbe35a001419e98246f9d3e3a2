package com.secondfloor.ofertame;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class SignUpActivity extends Activity {
	Button btnCadastrar;
	EditText txtEmail;
	EditText txtUserName;
	
	boolean verificaUsuarioCadastrado = false;
	
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sign_up_screen);
        
        btnCadastrar = (Button) findViewById(R.id.btnSingUp);
        
        txtUserName = (EditText) findViewById(R.id.etUserName);
        txtEmail = (EditText) findViewById(R.id.etEmail);
        
        btnCadastrar.setOnClickListener(new View.OnClickListener() {
			
			@Override
			public void onClick(View v) {
				
				String user = txtUserName.getText().toString();
				String email = txtEmail.getText().toString();
				String pass = etPass.getText().toString();
				
				if(verificaUsuarioCadastrado == false){
					SharedPreferences login = getSharedPreferences(PRF_USER, 0);
					SharedPreferences.Editor editor = login.edit();
					editor.putString("userName", user);
					editor.putString("email", email);
					editor.putString("password", pass);
					editor.commit();
					
					Toast.makeText(getApplicationContext(), "Usuário " +user+ " E-mail " +email+ " Criado com sucesso", Toast.LENGTH_LONG).show();
					
					trocaTela();

				}else if(user.equals(userNameSave) & email.equals(emailSave) & pass.equals(passSave)){
					Toast.makeText(getApplicationContext(), "Usuário já cadastrado ", Toast.LENGTH_LONG).show();
					
				}
			}
		});
    } 
    
    public void trocaTela(){
		Intent trocaTela = new Intent(SignUpActivity.this, SignInActivity.class);
		startActivity(trocaTela);
	}
    
    @Override
	protected void onStop() {
		super.onStop();
		//Garente que quando o usuário clicar no botão voltar, 
		//o sistema deve finalizar sem passar pela tela de login
		finish();
	}
}
